{"version":3,"sources":["../static/js/CandidateLoginFormConnector.1f2e6aee.chunk.js","Candidate/connectors/Forms/CandidateLoginFormConnector.js"],"names":["webpackJsonp","2012","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","d","formName","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default","__WEBPACK_IMPORTED_MODULE_2_redux_form__","__WEBPACK_IMPORTED_MODULE_3_react_redux__","__WEBPACK_IMPORTED_MODULE_4_react_router_dom__","__WEBPACK_IMPORTED_MODULE_5_Shared_constants_User__","__WEBPACK_IMPORTED_MODULE_6_Shared_ducks_user__","__WEBPACK_IMPORTED_MODULE_7_Shared_forms_Login__","__WEBPACK_IMPORTED_MODULE_8_Shared_validators_login__","__WEBPACK_IMPORTED_MODULE_9_Shared_helpers_string__","__WEBPACK_IMPORTED_MODULE_10_Shared_helpers_forms__","__WEBPACK_IMPORTED_MODULE_11_ramda__","_this","this","Form","form","validate","shouldValidate","mapStateToProps","state","role","candidate","name","userRole","user","isAuthenticated","steps","stepCompletion","authorizationError","formValues","displayCaptcha","isLoading","initialValues","email","window","location","search","mapDispatchToProps","dispatch","ownProps","logins","normal","normalWithCaptcha","linkedIn","google","redirectPath","isSocialLogin","values","login","_x","_ref","apply","arguments","a","mark","_callee","data","wrap","_context","prev","next","sent","t0","isNewAccount","abrupt","history","push","stop"],"mappings":"AAAAA,cAAc,KAERC,KACA,SAAUC,EAAQC,EAAqBC,GAE7C,YACAC,QAAOC,eAAeH,EAAqB,cAAgBI,OAAO,IACnCH,EAAoBI,EAAEL,EAAqB,WAAY,WAAa,MAAOM,IACrF,IAAIC,GAA0DN,EAAoB,GAC9EO,EAAkEP,EAAoBQ,EAAEF,GACxFG,EAAuET,EAAoB,IAC3FU,EAA+EV,EAAoBQ,EAAEC,GACrGE,EAA2CX,EAAoB,KAC/DY,EAA4CZ,EAAoB,IAChEa,EAAiDb,EAAoB,IACrEc,EAAsDd,EAAoB,IAC1Ee,EAAkDf,EAAoB,IACtEgB,EAAmDhB,EAAoB,MACvEiB,EAAwDjB,EAAoB,MAC5EkB,EAAsDlB,EAAoB,IAC1EmB,EAAsDnB,EAAoB,KAC1EoB,EAAuCpB,EAAoB,GAChFqB,EAAMC,KCXGjB,EAAW,qBAEpBkB,EAAOtB,OAAAU,EAAA,IACTa,KAAMnB,EACNoB,SAFmBR,EAAA,EAGnBS,eAAgB,WAAM,OAAN,KACfV,EAAA,GAEGW,EAAkB,SAAAC,GAAA,OACtBC,KAAMf,EAAA,EAAMgB,UAAUC,KACtBC,SAAUJ,EAAMK,KAAKJ,KACrBK,gBAAiBN,EAAMK,KAAKC,gBAC5BC,MAAOP,EAAMK,KAAKG,eAClBC,mBAAoBT,EAAMK,KAAKI,mBAC/BC,WAAYrC,OAAAU,EAAA,GAAcN,GAAUuB,GACpCW,eAAgBX,EAAMK,KAAKM,eAC3BC,UAAWZ,EAAMK,KAAKO,UACtBC,eACEC,MAAOzC,OAAAiB,EAAA,GAAgByB,OAAOC,SAASC,OAAQ,8BAI7CC,EAAqB,SAACC,EAAUC,GAC9B,GAAAC,IACJC,OAAQnC,EAAA,EACRoC,kBAAmBpC,EAAA,EACnBqC,SAAUrC,EAAA,EACVsC,OAAQtC,EAAA,GAGJuC,EAAerD,OAAAmB,EAAA,QAAO,MAAO,UAAW,WAAY,QAAS,OAAQ,YAAa4B,GAClFO,EAAgB,SAAAC,GAAU,MAAAvD,QAAAmB,EAAA,UAASnB,OAAAmB,EAAA,QAAO,YAAanB,OAAAmB,EAAA,QAAO,YAAYnB,OAAAkB,EAAA,GAAgBqC,IAEhG,QACEC,MAAA,mBAAAA,GAAAC,GAAA,MAAAC,GAAAC,MAAAtC,KAAAuC,WAAA,GAAAF,GAAAjD,IAAAH,EAAAuD,EAAAC,KAAO,QAAAC,GAAOR,GAAA,GAAAS,EAAA,OAAA1D,GAAAuD,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACO,MADPF,GAAAE,KAAA,EACOtB,EAASE,EAAOhD,OAAAkB,EAAA,GAAgBqC,IAASA,GAAA,QAAtDS,EAAAE,EAAAG,KAAAH,EAAAI,IACE,EAAAJ,EAAAE,KAAAF,EAAAI,MACDhB,EAAcC,IAAWS,EAAKO,cAAA,EAAAL,EAAAI,OAE7BhB,EAAcC,IAAWvD,OAAAmB,EAAA,SAAO,GAAQ,gBAAiB6C,IAAA,EAAAE,EAAAI,KAE1DtE,OAAAmB,EAAA,KAAInB,OAAAmB,EAAA,OAAMkC,IAAA,uBAAAa,GAAAM,OAAA,SAHNzB,EAAS0B,QAAQC,KAAK,mCAAAR,GAAAM,OAAA,SAEtBzB,EAAS0B,QAAQC,KAAK,6CAAAR,GAAAM,OAAA,SAEtBzB,EAAS0B,QAAQC,KAAKrB,GAAA,cAAAa,GAAAM,OAAA,SAEtBzB,EAAS0B,QAAQC,KAAK,iDAAAR,GAAAS,SAAAZ,EAAA3C,KAVnC,OAAAoC,OAgBW1D,GAAA,QAAAE,OAAAY,EAAA,GAAWZ,OAAAW,EAAA,GAAQe,EAAiBmB,GAAoBvB","file":"static/js/CandidateLoginFormConnector.1f2e6aee.chunk.js","sourcesContent":["webpackJsonp([46],{\n\n/***/ 2012:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"formName\", function() { return formName; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_redux_form__ = __webpack_require__(100);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_react_redux__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_react_router_dom__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_Shared_constants_User__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_Shared_ducks_user__ = __webpack_require__(68);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_Shared_forms_Login__ = __webpack_require__(2948);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_Shared_validators_login__ = __webpack_require__(2574);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_Shared_helpers_string__ = __webpack_require__(66);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_Shared_helpers_forms__ = __webpack_require__(102);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_ramda__ = __webpack_require__(6);\nvar _this=this;var formName='CandidateLoginForm';var Form=Object(__WEBPACK_IMPORTED_MODULE_2_redux_form__[\"s\" /* reduxForm */])({form:formName,validate:__WEBPACK_IMPORTED_MODULE_8_Shared_validators_login__[\"a\" /* default */],shouldValidate:function shouldValidate(){return true;}})(__WEBPACK_IMPORTED_MODULE_7_Shared_forms_Login__[\"a\" /* default */]);var mapStateToProps=function mapStateToProps(state){return{role:__WEBPACK_IMPORTED_MODULE_5_Shared_constants_User__[\"f\" /* Roles */].candidate.name,userRole:state.user.role,isAuthenticated:state.user.isAuthenticated,steps:state.user.stepCompletion,authorizationError:state.user.authorizationError,formValues:Object(__WEBPACK_IMPORTED_MODULE_2_redux_form__[\"k\" /* getFormValues */])(formName)(state),displayCaptcha:state.user.displayCaptcha,isLoading:state.user.isLoading,initialValues:{email:Object(__WEBPACK_IMPORTED_MODULE_9_Shared_helpers_string__[\"r\" /* initializeEmail */])(window.location.search,'resend-activation-email')}};};var mapDispatchToProps=function mapDispatchToProps(dispatch,ownProps){var logins={normal:__WEBPACK_IMPORTED_MODULE_6_Shared_ducks_user__[\"g\" /* login */],normalWithCaptcha:__WEBPACK_IMPORTED_MODULE_6_Shared_ducks_user__[\"g\" /* login */],linkedIn:__WEBPACK_IMPORTED_MODULE_6_Shared_ducks_user__[\"j\" /* loginWithLinkedIn */],google:__WEBPACK_IMPORTED_MODULE_6_Shared_ducks_user__[\"i\" /* loginWithGoogle */]};var redirectPath=Object(__WEBPACK_IMPORTED_MODULE_11_ramda__[\"pathOr\"])(null,['history','location','state','from','pathname'],ownProps);var isSocialLogin=function isSocialLogin(values){return Object(__WEBPACK_IMPORTED_MODULE_11_ramda__[\"anyPass\"])([Object(__WEBPACK_IMPORTED_MODULE_11_ramda__[\"equals\"])('linkedIn'),Object(__WEBPACK_IMPORTED_MODULE_11_ramda__[\"equals\"])('google')])(Object(__WEBPACK_IMPORTED_MODULE_10_Shared_helpers_forms__[\"h\" /* matchLoginModel */])(values));};return{login:function(){var _ref=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(values){var data;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(logins[Object(__WEBPACK_IMPORTED_MODULE_10_Shared_helpers_forms__[\"h\" /* matchLoginModel */])(values)](values));case 2:data=_context.sent;_context.t0=true;_context.next=_context.t0===(isSocialLogin(values)&&data.isNewAccount)?6:_context.t0===(!isSocialLogin(values)&&Object(__WEBPACK_IMPORTED_MODULE_11_ramda__[\"pathOr\"])(false,['isNewAccount'],data))?7:_context.t0===Object(__WEBPACK_IMPORTED_MODULE_11_ramda__[\"not\"])(Object(__WEBPACK_IMPORTED_MODULE_11_ramda__[\"isNil\"])(redirectPath))?8:9;break;case 6:return _context.abrupt('return',ownProps.history.push('/candidate/thanks'));case 7:return _context.abrupt('return',ownProps.history.push('/candidate/profile/complete'));case 8:return _context.abrupt('return',ownProps.history.push(redirectPath));case 9:return _context.abrupt('return',ownProps.history.push('/candidate/dashboard'));case 10:case'end':return _context.stop();}}},_callee,_this);}));function login(_x){return _ref.apply(this,arguments);}return login;}()};};/* harmony default export */ __webpack_exports__[\"default\"] = (Object(__WEBPACK_IMPORTED_MODULE_4_react_router_dom__[\"g\" /* withRouter */])(Object(__WEBPACK_IMPORTED_MODULE_3_react_redux__[\"b\" /* connect */])(mapStateToProps,mapDispatchToProps)(Form)));\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/CandidateLoginFormConnector.1f2e6aee.chunk.js","import { reduxForm, getFormValues } from 'redux-form'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { Roles } from 'Shared/constants/User'\r\nimport { login, loginWithLinkedIn, loginWithGoogle } from 'Shared/ducks/user'\r\nimport CandidateLoginForm from 'Shared/forms/Login'\r\nimport validate from 'Shared/validators/login'\r\nimport { initializeEmail } from 'Shared/helpers/string'\r\nimport { matchLoginModel } from 'Shared/helpers/forms'\r\nimport { pathOr, not, isNil, anyPass, equals } from 'ramda'\r\n\r\nexport const formName = 'CandidateLoginForm'\r\n\r\nlet Form = reduxForm({\r\n  form: formName,\r\n  validate,\r\n  shouldValidate: () => true\r\n})(CandidateLoginForm)\r\n\r\nconst mapStateToProps = state => ({\r\n  role: Roles.candidate.name,\r\n  userRole: state.user.role,\r\n  isAuthenticated: state.user.isAuthenticated,\r\n  steps: state.user.stepCompletion,\r\n  authorizationError: state.user.authorizationError,\r\n  formValues: getFormValues(formName)(state),\r\n  displayCaptcha: state.user.displayCaptcha,\r\n  isLoading: state.user.isLoading,\r\n  initialValues: {\r\n    email: initializeEmail(window.location.search, 'resend-activation-email')\r\n  }\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n  const logins = {\r\n    normal: login,\r\n    normalWithCaptcha: login,\r\n    linkedIn: loginWithLinkedIn,\r\n    google: loginWithGoogle\r\n  }\r\n\r\n  const redirectPath = pathOr(null, ['history', 'location', 'state', 'from', 'pathname'], ownProps)\r\n  const isSocialLogin = values => anyPass([equals('linkedIn'), equals('google')])(matchLoginModel(values))\r\n\r\n  return {\r\n    login: async (values) => {\r\n      const data = await dispatch(logins[matchLoginModel(values)](values))\r\n      switch (true) {\r\n        case isSocialLogin(values) && data.isNewAccount:\r\n          return ownProps.history.push('/candidate/thanks')\r\n        case !isSocialLogin(values) && pathOr(false, ['isNewAccount'], data):\r\n          return ownProps.history.push('/candidate/profile/complete')\r\n        case not(isNil(redirectPath)):\r\n          return ownProps.history.push(redirectPath)\r\n        default:\r\n          return ownProps.history.push('/candidate/dashboard')\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Form))\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Candidate/connectors/Forms/CandidateLoginFormConnector.js"],"sourceRoot":""}