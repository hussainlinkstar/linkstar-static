{"version":3,"sources":["../static/js/ChangeEmail.65a8b78f.chunk.js","Shared/components/ChangeEmail/ChangeEmail.js"],"names":["webpackJsonp","2036","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_7_react__","__WEBPACK_IMPORTED_MODULE_7_react___default","__WEBPACK_IMPORTED_MODULE_8_prop_types__","__WEBPACK_IMPORTED_MODULE_8_prop_types___default","__WEBPACK_IMPORTED_MODULE_9_react_router_dom__","__WEBPACK_IMPORTED_MODULE_10_ramda__","__WEBPACK_IMPORTED_MODULE_11_notie__","__WEBPACK_IMPORTED_MODULE_11_notie___default","__WEBPACK_IMPORTED_MODULE_12_Shared_hoc_withTranslations__","__WEBPACK_IMPORTED_MODULE_13_Shared_services_UserService__","__WEBPACK_IMPORTED_MODULE_14_Shared_constants_User__","userService","ChangeEmail","_Component","_ref","_temp","_this","_ret","this","_len","arguments","length","args","Array","_key","__proto__","call","apply","concat","state","resolved","changeEmailSuccess","undefined","key","changeEmail","_ref2","a","mark","_callee","_props","role","_props$match$params","id","token","wrap","_context","prev","next","props","match","params","abrupt","candidate","name","changeCandidateEmail","changeEmployerEmail","stop","componentDidMount","_ref3","_callee2","_context2","t0","verificationFail","update","setState","_props2","t","redirect","propTypes","string","isRequired","displayResultNotice","createElement","to","getNoticeData","alert","success","type","text","fail"],"mappings":"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","file":"static/js/ChangeEmail.65a8b78f.chunk.js","sourcesContent":["webpackJsonp([37],{\n\n/***/ 2036:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_prop_types__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_react_router_dom__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_ramda__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_notie__ = __webpack_require__(125);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_notie___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11_notie__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_Shared_hoc_withTranslations__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_Shared_services_UserService__ = __webpack_require__(159);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_Shared_constants_User__ = __webpack_require__(23);\nvar userService=new __WEBPACK_IMPORTED_MODULE_13_Shared_services_UserService__[\"a\" /* default */]();var ChangeEmail=function(_Component){__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default()(ChangeEmail,_Component);function ChangeEmail(){var _ref;var _temp,_this,_ret;__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this,ChangeEmail);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(this,(_ref=ChangeEmail.__proto__||__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(ChangeEmail)).call.apply(_ref,[this].concat(args))),_this),_this.state={resolved:false,changeEmailSuccess:undefined},_temp),__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(_this,_ret);}__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(ChangeEmail,[{key:'changeEmail',value:function(){var _ref2=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(){var _props,role,_props$match$params,id,token;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_props=this.props,role=_props.role,_props$match$params=_props.match.params,id=_props$match$params.id,token=_props$match$params.token;return _context.abrupt('return',role===__WEBPACK_IMPORTED_MODULE_14_Shared_constants_User__[\"f\" /* Roles */].candidate.name?userService.changeCandidateEmail(id,token):userService.changeEmployerEmail(id,token));case 2:case'end':return _context.stop();}}},_callee,this);}));function changeEmail(){return _ref2.apply(this,arguments);}return changeEmail;}()},{key:'componentDidMount',value:function(){var _ref3=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2(){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return this.changeEmail();case 3:this.changeEmailSuccess();_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2['catch'](0);this.verificationFail();case 9:case'end':return _context2.stop();}}},_callee2,this,[[0,6]]);}));function componentDidMount(){return _ref3.apply(this,arguments);}return componentDidMount;}()},{key:'changeEmailSuccess',value:function changeEmailSuccess(){this.update(true);}},{key:'verificationFail',value:function verificationFail(){this.update(false);}},{key:'update',value:function update(changeEmailSuccess){this.setState({resolved:true,changeEmailSuccess:changeEmailSuccess});}},{key:'render',value:function render(){var _props2=this.props,t=_props2.t,role=_props2.role;return Object(__WEBPACK_IMPORTED_MODULE_10_ramda__[\"ifElse\"])(Object(__WEBPACK_IMPORTED_MODULE_10_ramda__[\"prop\"])('resolved'),redirect(t,role),Object(__WEBPACK_IMPORTED_MODULE_10_ramda__[\"always\"])(null))(this.state);}}]);return ChangeEmail;}(__WEBPACK_IMPORTED_MODULE_7_react__[\"Component\"]);ChangeEmail.propTypes={role:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.string.isRequired};var redirect=function redirect(t,role){return function(state){var changeEmailSuccess=Object(__WEBPACK_IMPORTED_MODULE_10_ramda__[\"prop\"])('changeEmailSuccess',state);displayResultNotice(t)(changeEmailSuccess);return __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9_react_router_dom__[\"d\" /* Redirect */],{to:'/'+role+'/logout'});};};var displayResultNotice=function displayResultNotice(t){return Object(__WEBPACK_IMPORTED_MODULE_10_ramda__[\"pipe\"])(getNoticeData(t),__WEBPACK_IMPORTED_MODULE_11_notie___default.a.alert);};var success=function success(t){return function(){return{type:'success',text:t('changeEmail.success')};};};var fail=function fail(t){return function(){return{type:'error',text:t('changeEmail.fail')};};};var getNoticeData=function getNoticeData(t){return Object(__WEBPACK_IMPORTED_MODULE_10_ramda__[\"ifElse\"])(Object(__WEBPACK_IMPORTED_MODULE_10_ramda__[\"equals\"])(true),success(t),fail(t));};/* harmony default export */ __webpack_exports__[\"default\"] = (Object(__WEBPACK_IMPORTED_MODULE_12_Shared_hoc_withTranslations__[\"a\" /* default */])(ChangeEmail));\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/ChangeEmail.65a8b78f.chunk.js","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { ifElse, prop, always, pipe, equals } from 'ramda'\r\nimport notie from 'notie'\r\nimport withTranslations from 'Shared/hoc/withTranslations'\r\nimport UserService from 'Shared/services/UserService'\r\nimport { Roles } from 'Shared/constants/User'\r\n\r\nconst userService = new UserService()\r\n\r\nclass ChangeEmail extends Component {\r\n  static propTypes = {\r\n    role: PropTypes.string.isRequired\r\n  }\r\n  state = {\r\n    resolved: false,\r\n    changeEmailSuccess: undefined\r\n  }\r\n\r\n  async changeEmail () {\r\n    const { role, match: { params: { id, token } } } = this.props\r\n\r\n    return role === Roles.candidate.name\r\n      ? userService.changeCandidateEmail(id, token)\r\n      : userService.changeEmployerEmail(id, token)\r\n  }\r\n\r\n  async componentDidMount () {\r\n    try {\r\n      await this.changeEmail()\r\n\r\n      this.changeEmailSuccess()\r\n    } catch (e) {\r\n      this.verificationFail()\r\n    }\r\n  }\r\n\r\n  changeEmailSuccess () {\r\n    this.update(true)\r\n  }\r\n\r\n  verificationFail () {\r\n    this.update(false)\r\n  }\r\n\r\n  update (changeEmailSuccess) {\r\n    this.setState({\r\n      resolved: true,\r\n      changeEmailSuccess\r\n    })\r\n  }\r\n\r\n  render () {\r\n    const { t, role } = this.props\r\n\r\n    return ifElse(\r\n      prop('resolved'),\r\n      redirect(t, role),\r\n      always(null)\r\n    )(this.state)\r\n  }\r\n}\r\n\r\nconst redirect = (t, role) => state => {\r\n  const changeEmailSuccess = prop('changeEmailSuccess', state)\r\n\r\n  displayResultNotice(t)(changeEmailSuccess)\r\n\r\n  return (\r\n    <Redirect to={`/${role}/logout`} />\r\n  )\r\n}\r\n\r\nconst displayResultNotice = t => pipe(\r\n  getNoticeData(t),\r\n  notie.alert\r\n)\r\n\r\nconst success = t => () => ({ type: 'success', text: t('changeEmail.success') })\r\n\r\nconst fail = t => () => ({ type: 'error', text: t('changeEmail.fail') })\r\n\r\nconst getNoticeData = t => ifElse(\r\n  equals(true),\r\n  success(t),\r\n  fail(t)\r\n)\r\n\r\nexport default withTranslations(ChangeEmail)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Shared/components/ChangeEmail/ChangeEmail.js"],"sourceRoot":""}